webpackJsonp([2,0],[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var a=r(58),n=s(a),o=r(13),i=s(o),u=r(57),d=s(u),l=r(49),c=s(l),f=r(6);n.default.use(i.default),n.default.use(d.default),new n.default({el:"#app",router:f.router,template:"<App/>",components:{App:c.default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(6),a={SCHEME:"https",HOSTNAME:window.location.hostname},n=a.SCHEME,o=a.HOSTNAME,i=n+"://"+o+"/api",u=i+"/registrations/",d=i+"/sessions/",l=i+"/current_user/";t.default={user:{authenticated:!!localStorage.getItem("id_token")},login:function(e,t,r){var a=this;e.$http.post(d,t).then(function(e){localStorage.setItem("id_token",e.body.jwt),a.user.authenticated=!0,r&&s.router.push({path:r})},function(t){e.error=t.body.message})},currentUser:function(e){e.$http.get(l,{headers:this.getAuthHeader()}).then(function(t){e.user=t.body.user},function(e){console.log(e)})},signup:function(e,t,r){var a=this;e.$http.post(u,t).then(function(e){localStorage.setItem("id_token",e.body.jwt),a.user.authenticated=!0,r&&s.router.push({path:r})},function(t){console.log(t.body.errors),e.errors=t.body.errors})},logout:function(e,t){var r=this;e.$http.delete(d,t).then(function(e){localStorage.removeItem("id_token"),r.user.authenticated=!1,s.router.push({path:"/login"})},function(e){console.log(e.message)})},checkAuth:function(){var e=localStorage.getItem("id_token");this.user.authenticated=!!e},getAuthHeader:function(){return{Authorization:localStorage.getItem("id_token")}}}},,,,,function(e,t,r){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.router=void 0;var a=r(13),n=s(a),o=r(50),i=s(o),u=r(51),d=s(u),l=r(52),c=s(l),f=r(1),p=s(f),m=function(e,t,r){p.default.user.authenticated?r():r({path:"/login",query:{redirect:e.fullPath}})},h=function(e,t,r){p.default.user.authenticated?r(t.path):r()};t.router=new n.default({mode:"history",base:e,routes:[{path:"/",component:i.default,beforeEnter:m},{path:"/login",component:d.default,beforeEnter:h},{path:"/signup",component:c.default,beforeEnter:h},{path:"*",redirect:"/"}]})}).call(t,"/")},,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="https",a="dc6zaTOxFJmzC",n=s+"://api.giphy.com/v1/",o="gifs/search";t.default={getGifByQuery:function(e,t,r){var s=Math.floor(20*Math.random()+1),i=encodeURIComponent(t),u=""+n+o+"?q="+i+"&api_key="+a;e.$http.get(u).then(function(t){try{e.image=t.body.data[s].images.original.url}catch(t){console.log(t.message),r&&(e.image=r)}},function(e){console.log(e.body)})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=s(a);t.default={name:"App",data:function(){return{user:n.default.user}},methods:{logout:function(){n.default.logout(this,{headers:n.default.getAuthHeader()})}}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=s(a),o=r(14),i=s(o);t.default={data:function(){return{user:{},image:"",query:""}},beforeCreate:function(){n.default.currentUser(this),i.default.getGifByQuery(this,"welcome")},methods:{searchGIF:function(){var e=this.image;this.image="",i.default.getGifByQuery(this,this.query,e),this.query=""},logout:function(){n.default.logout(this,{headers:n.default.getAuthHeader()})}}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=s(a),o=r(1),i=s(o);t.default={data:function(){return{credentials:{username:"",password:""},error:"",errors:(0,n.default)({},this.credentials)}},methods:{login:function(){this._validateLoginForm();var e={username:this.credentials.username,password:this.credentials.password};this.credentials.username&&this.credentials.password&&(i.default.login(this,{session:e},"/"),this.errors={username:"",password:""})},_validateLoginForm:function(){return this.error="",this.credentials.username||this.credentials.password?this.credentials.username?this.credentials.password?void 0:void(this.errors={username:"",password:"can't be blank"}):void(this.errors={username:"can't be blank",password:""}):void(this.errors={username:"can't be blank",password:"can't be blank"})}}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=s(a),o=r(1),i=s(o);t.default={data:function(){return{credentials:{name:"",username:"",password:""},errors:(0,n.default)({},this.credentials)}},methods:{signup:function(){i.default.signup(this,{user:this.credentials},"/")}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,r){var s,a;r(48),s=r(15);var n=r(55);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,e.exports=s},function(e,t,r){var s,a;r(47),s=r(16);var n=r(54);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-3a0105ae",e.exports=s},function(e,t,r){var s,a;r(46),s=r(17);var n=r(53);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-240496aa",e.exports=s},function(e,t,r){var s,a;s=r(18);var n=r(56);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,e.exports=s},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"login-page"},[t("div",{staticClass:"form"},[e.$route.query.redirect?t("p",{staticClass:"redirect-message"},["\n      You need to login first\n    "]):e._e()," ",t("form",{staticClass:"login-form",on:{submit:function(t){t.preventDefault(),e.login(t)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.username,expression:"credentials.username"}],attrs:{type:"text",placeholder:"Enter your username"},domProps:{value:e._s(e.credentials.username)},on:{input:function(t){t.target.composing||(e.credentials.username=t.target.value)}}})," ",e.errors.username?t("p",{staticClass:"field-message"},[e._s(e.errors.username)]):e._e()," ",t("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Enter your password"},domProps:{value:e._s(e.credentials.password)},on:{input:function(t){t.target.composing||(e.credentials.password=t.target.value)}}})," ",e.errors.password?t("p",{staticClass:"field-message"},[e._s(e.errors.password)]):e._e()," ",e.error?t("p",{staticClass:"error-message"},[e._s(e.error)]):e._e()," ",t("button",{attrs:{type:"submit"}},["Login"])," ",t("p",{staticClass:"message"},["Not registered? ",t("router-link",{attrs:{to:"signup"}},["Create an account"])])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"form hello-view"},[t("form",{staticClass:"giphy-form",on:{submit:function(t){t.preventDefault(),e.searchGIF()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"Search all the GIFs"},domProps:{value:e._s(e.query)},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})," ",t("button",{attrs:{type:"submit"}},["Search"])])," ",t("div",{staticClass:"horizontal"},[t("div",{staticClass:"vertical"},[t("img",{staticClass:"welcome-gif",attrs:{src:e.image}})])])," ",t("p",{staticClass:"message home-logout-message"},["Already tired?\n    ",t("a",{attrs:{href:"/login"},on:{click:function(t){t.preventDefault(),e.logout()}}},["Get Out!"])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{attrs:{id:"app"}},[t("router-view")])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"login-page"},[t("div",{staticClass:"form"},[t("form",{staticClass:"register-form",on:{submit:function(t){t.preventDefault(),e.signup()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.name,expression:"credentials.name"}],attrs:{type:"text",placeholder:"Enter your full name"},domProps:{value:e._s(e.credentials.name)},on:{input:function(t){t.target.composing||(e.credentials.name=t.target.value)}}})," ",e.errors.name?t("p",{staticClass:"field-message"},[e._s(e.errors.name)]):e._e()," ",t("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.username,expression:"credentials.username"}],attrs:{type:"text",placeholder:"Enter your username"},domProps:{value:e._s(e.credentials.username)},on:{input:function(t){t.target.composing||(e.credentials.username=t.target.value)}}})," ",e.errors.username?t("p",{staticClass:"field-message"},[e._s(e.errors.username)]):e._e()," ",t("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.password,expression:"credentials.password"}],attrs:{type:"password",placeholder:"Enter your password"},domProps:{value:e._s(e.credentials.password)},on:{input:function(t){t.target.composing||(e.credentials.password=t.target.value)}}})," ",e.errors.password?t("p",{staticClass:"field-message"},[e._s(e.errors.password)]):e._e()," ",t("button",{attrs:{type:"submit"}},["Signup"])," ",t("p",{staticClass:"message"},["\n      Already registered? ",t("router-link",{attrs:{to:"login"}},["Login"])])])])])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.js.map